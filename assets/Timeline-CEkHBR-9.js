import{k as F,l as U,m as M,p as W,t as O,r as x,v as B,j as s,o as k,q as D,u as E,f as Q,N as R,C as I}from"./index-CqE5JmRW.js";import{L as P,y as X,f as Z,l as V,B as tt,v as et,I as st,A as ot}from"./mdi-DZtbSFbO.js";import{l as nt}from"./listItemButtonClasses-DWhKiLV8.js";function it(e){return F("MuiListSubheader",e)}U("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);const rt=e=>{const{classes:t,color:o,disableGutters:i,inset:d,disableSticky:m}=e,c={root:["root",o!=="default"&&`color${W(o)}`,!i&&"gutters",d&&"inset",!m&&"sticky"]};return D(c,it,t)},at=M("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.color!=="default"&&t[`color${W(o.color)}`],!o.disableGutters&&t.gutters,o.inset&&t.inset,!o.disableSticky&&t.sticky]}})(O(({theme:e})=>({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(e.vars||e).palette.text.secondary,fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(14),variants:[{props:{color:"primary"},style:{color:(e.vars||e).palette.primary.main}},{props:{color:"inherit"},style:{color:"inherit"}},{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>t.inset,style:{paddingLeft:72}},{props:({ownerState:t})=>!t.disableSticky,style:{position:"sticky",top:0,zIndex:1,backgroundColor:(e.vars||e).palette.background.paper}}]}))),T=x.forwardRef(function(t,o){const i=B({props:t,name:"MuiListSubheader"}),{className:d,color:m="default",component:c="li",disableGutters:h=!1,disableSticky:y=!1,inset:L=!1,...v}=i,n={...i,color:m,component:c,disableGutters:h,disableSticky:y,inset:L},r=rt(n);return s.jsx(at,{as:c,className:k(r.root,d),ref:o,ownerState:n,...v})});T&&(T.muiSkipListHighlight=!0);function lt(e){return F("MuiListItem",e)}U("MuiListItem",["root","container","dense","alignItemsFlexStart","divider","gutters","padding","secondaryAction"]);function dt(e){return F("MuiListItemSecondaryAction",e)}U("MuiListItemSecondaryAction",["root","disableGutters"]);const ct=e=>{const{disableGutters:t,classes:o}=e;return D({root:["root",t&&"disableGutters"]},dt,o)},pt=M("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.disableGutters&&t.disableGutters]}})({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",variants:[{props:({ownerState:e})=>e.disableGutters,style:{right:0}}]}),Y=x.forwardRef(function(t,o){const i=B({props:t,name:"MuiListItemSecondaryAction"}),{className:d,...m}=i,c=x.useContext(P),h={...i,disableGutters:c.disableGutters},y=ct(h);return s.jsx(pt,{className:k(y.root,d),ownerState:h,ref:o,...m})});Y.muiName="ListItemSecondaryAction";const ut=(e,t)=>{const{ownerState:o}=e;return[t.root,o.dense&&t.dense,o.alignItems==="flex-start"&&t.alignItemsFlexStart,o.divider&&t.divider,!o.disableGutters&&t.gutters,!o.disablePadding&&t.padding,o.hasSecondaryAction&&t.secondaryAction]},mt=e=>{const{alignItems:t,classes:o,dense:i,disableGutters:d,disablePadding:m,divider:c,hasSecondaryAction:h}=e;return D({root:["root",i&&"dense",!d&&"gutters",!m&&"padding",c&&"divider",t==="flex-start"&&"alignItemsFlexStart",h&&"secondaryAction"],container:["container"]},lt,o)},gt=M("div",{name:"MuiListItem",slot:"Root",overridesResolver:ut})(O(({theme:e})=>({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",variants:[{props:({ownerState:t})=>!t.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:t})=>!t.disablePadding&&t.dense,style:{paddingTop:4,paddingBottom:4}},{props:({ownerState:t})=>!t.disablePadding&&!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>!t.disablePadding&&!!t.secondaryAction,style:{paddingRight:48}},{props:({ownerState:t})=>!!t.secondaryAction,style:{[`& > .${nt.root}`]:{paddingRight:48}}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:t})=>t.button,style:{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:({ownerState:t})=>t.hasSecondaryAction,style:{paddingRight:48}}]}))),ft=M("li",{name:"MuiListItem",slot:"Container",overridesResolver:(e,t)=>t.container})({position:"relative"}),C=x.forwardRef(function(t,o){const i=B({props:t,name:"MuiListItem"}),{alignItems:d="center",children:m,className:c,component:h,components:y={},componentsProps:L={},ContainerComponent:v="li",ContainerProps:{className:n,...r}={},dense:p=!1,disableGutters:a=!1,disablePadding:g=!1,divider:l=!1,secondaryAction:f,slotProps:u={},slots:_={},...J}=i,z=x.useContext(P),G=x.useMemo(()=>({dense:p||z.dense||!1,alignItems:d,disableGutters:a}),[d,z.dense,p,a]),K=x.useRef(null),b=x.Children.toArray(m),$=b.length&&X(b[b.length-1],["ListItemSecondaryAction"]),w={...i,alignItems:d,dense:G.dense,disableGutters:a,disablePadding:g,divider:l,hasSecondaryAction:$},q=mt(w),H=Z(K,o),N=_.root||y.Root||gt,j=u.root||L.root||{},A={className:k(q.root,j.className,c),...J};let S=h||"li";return $?(S=!A.component&&!h?"div":S,v==="li"&&(S==="li"?S="div":A.component==="li"&&(A.component="div")),s.jsx(P.Provider,{value:G,children:s.jsxs(ft,{as:v,className:k(q.container,n),ref:H,ownerState:w,...r,children:[s.jsx(N,{...j,...!V(N)&&{as:S,ownerState:{...w,...j.ownerState}},...A,children:b}),b.pop()]})})):s.jsx(P.Provider,{value:G,children:s.jsxs(N,{...j,as:S,ref:H,...!V(N)&&{ownerState:{...w,...j.ownerState}},...A,children:[b,f&&s.jsx(Y,{children:f})]})})});function vt(){const e=E(n=>n.notes),t=E(n=>n.players.players),o=Q();let i=-1,d=[],m=[],c=[];function h({note:n}){let r=[];if(d.length>0){let a=Array.from({length:t.length},(l,f)=>f).filter(l=>!d.includes(l));r.push(s.jsxs(C,{children:[a.map((l,f)=>t[l].name+(f<a.length-1?", ":" ")),a.length===0?"Nobody ":"","did not nominate today"]}));let g=Array.from({length:t.length},(l,f)=>f).filter(l=>!m.includes(l));r.push(s.jsxs(C,{children:[g.map((l,f)=>t[l].name+(f<g.length-1?", ":" ")),g.length===0?"Nobody ":"","did not vote today"]}))}const p=n.find(a=>Array.isArray(a)&&a[0]==I.Time);if(p){const a=p[1],g=a%2===0,l=Math.floor(a/2+1);r.push(s.jsxs(T,{children:[g?"Night ":"Day ",l]},(g?"Night ":"Day ")+l))}return d=[],m=[],r}function y({nom_note:n,vote_note:r}){var l,f;const p=(l=n.find(u=>Array.isArray(u)&&u[0]==I.Player))==null?void 0:l.at(1),a=(f=n.findLast(u=>Array.isArray(u)&&u[0]==I.Player))==null?void 0:f.at(1);if(p==null||a==null)return s.jsx(s.Fragment,{});const g=r.filter(u=>Array.isArray(u)&&u[0]==I.Player).map(u=>u[1]);return d.push(p),m.push(...g),s.jsx(C,{children:s.jsxs("div",{className:"flex flex-row flex-wrap w-full",children:[s.jsx("div",{className:"grow",children:s.jsxs("div",{className:"flex flex-row ",children:[s.jsx("div",{children:t[p].name}),s.jsx("div",{children:s.jsx(st,{path:ot,size:1})}),s.jsxs("div",{children:[t[a].name," :"]}),s.jsx("div",{})]})}),s.jsxs("div",{className:"grow-[4]",children:[g.length===0?"nobody":"",g.map((u,_)=>t[u].name+(_<g.length-1?", ":""))]})]})})}function L({note:n}){var p;const r=(p=n.find(a=>Array.isArray(a)&&a[0]==I.Player))==null?void 0:p.at(1);return r==null?s.jsx(s.Fragment,{}):c.includes(r)?(c.splice(c.indexOf(r),1),s.jsxs(C,{children:[t[r].name," came back to life"]})):(c.push(r),s.jsxs(C,{children:[t[r].name," died"]}))}const v=e.map((n,r)=>{switch(n.tag){case null:return s.jsx(s.Fragment,{});case R.Time:return i=-1,h({note:n.note});case R.Nomination:return i=r,s.jsx(s.Fragment,{});case R.Vote:if(i!=-1){const p=y({nom_note:e[i].note,vote_note:n.note});return i=-1,p}else return s.jsx(s.Fragment,{});case R.LifeDeath:return L({note:n.note})}});return v.push(h({note:[]})),s.jsxs("div",{className:"flex flex-col max-h-screen",children:[s.jsx("div",{className:"h-fit",children:s.jsx(tt,{id:"townsquare",name:"townsquare",onClick:()=>o("/play"),children:"Back to townsquare"})}),s.jsx("div",{className:"grow w-full max-h-full overflow-scroll",children:s.jsx(et,{children:v})})]})}export{vt as default};
